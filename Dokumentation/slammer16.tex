\documentclass[12pt,ngerman,pointlessnumbers, abstracton, headsepline]{scrreprt}
\renewcommand{\familydefault}{\sfdefault}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{geometry}
\geometry{verbose,tmargin=2.5cm,bmargin=2.5cm}
\pagestyle{plain}
\setlength{\parskip}{\medskipamount}
\setlength{\parindent}{0pt}
\usepackage{color}
\usepackage{babel}
\usepackage{array}
\usepackage{varioref}
\usepackage{textcomp}
\usepackage{multirow}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{nomencl}
% the following is useful when we have the old nomencl.sty package
\providecommand{\printnomenclature}{\printglossary}
\providecommand{\makenomenclature}{\makeglossary}
\makenomenclature
\setstretch{1.2}

\makeatletter

%% Because html converters don't know tabularnewline
\providecommand{\tabularnewline}{\\}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
% verschieden Symbole, Zeichen wie (c), ¤
\usepackage{textcomp,units}

% Mehr Platz zwischen Tabelle und Untertitel
\usepackage{caption}
\captionsetup[table]{skip=10pt}

%Kapitelzahl sehr groß
\makeatletter% siehe De-TeX-FAQ 
 \renewcommand*{\chapterformat}{% 
   \begingroup% damit \unitlength-Änderung lokal bleibt 
     \setlength{\unitlength}{1mm}% 
     \begin{picture}(10,10)(0,5) 
       \setlength{\fboxsep}{0pt} 
       %\put(0,0){\framebox(20,40){}}% 
       %\put(0,20){\makebox(20,20){\rule{20\unitlength}{20\unitlength}}}% 
       \put(10,15){\line(1,0){\dimexpr 
           \textwidth-20\unitlength\relax\@gobble}}% 
       \put(0,0){\makebox(10,20)[r]{% 
           \fontsize{28\unitlength}{28\unitlength}\selectfont\thechapter 
           \kern-.05em% Ziffer in der Zeichenzelle nach rechts schieben 
         }}% 
       \put(10,15){\makebox(\dimexpr 
           \textwidth-20\unitlength\relax\@gobble,\ht\strutbox\@gobble)[l]{% 
             \ \normalsize\color{black}\chapapp~\thechapter\autodot 
           }}% 
     \end{picture} % <-- Leerzeichen ist hier beabsichtigt! 
   \endgroup 
}                                          

\usepackage{ %a4wide,
            ellipsis, fixltx2e, mparhack,   %Fehlerkorrektur für Marginalien
            booktabs, longtable             %schönere Tabellen
}  

\usepackage[automark]{scrpage2}
%\automark[chapter]{chapter}
\clearscrheadfoot
\ohead{\\\headmark}
\ihead{\includegraphics[scale=0.15]{logo.jpg}}%\pagemark}
\ofoot[\pagemark]{\pagemark}


%Kurzfassung und Abstract (englisch) auf eine Seite
\renewenvironment{abstract}{
    \@beginparpenalty\@lowpenalty
      \begin{center}
        \normalfont\sectfont\nobreak\abstractname
        \@endparpenalty\@M
      \end{center}
}{
    \par
}



% schönerer Blocksatz!!
\usepackage{microtype}

\usepackage{ifpdf} % part of the hyperref bundle
\ifpdf % if pdflatex is used

%set fonts for nicer pdf view
 \IfFileExists{lmodern.sty}{\usepackage{lmodern}}
  {\usepackage[scaled=0.92]{helvet}
    \usepackage{mathptmx}
    \usepackage{courier} }
\fi

 % the pages of the TOC are numbered roman
 % and a pdf-bookmark for the TOC is added
 \pagenumbering{roman}
 \let\myTOC\tableofcontents
 \renewcommand\tableofcontents{
   %\pdfbookmark[1]{Contents}{}
   \myTOC
   \clearpage
   \pagenumbering{arabic}}

%Bezeichungen anpassen
%Babelpaket muß zuvor geladen werden
%\usepackage[ngerman]{babel}
\addto\captionsngerman{ 
\renewcommand{\figurename}{Abb.}% 
\renewcommand{\tablename}{Tab.}% 
\renewcommand{\abstractname}{Kurzfassung}
%\renewcommand{\nomname}{Abkürzungen}
}

% Alle Querverweise und URLs als Link darstellen
% In der PDF-Ausgabe
 \usepackage[colorlinks=true, bookmarks, bookmarksnumbered, bookmarksopen, bookmarksopenlevel=1,
  linkcolor=black, citecolor=black, urlcolor=blue, filecolor=blue,
  pdfpagelayout=OneColumn, pdfnewwindow=true,
  pdfstartview=XYZ, plainpages=false, pdfpagelabels,
  pdfauthor={LyX Team}, pdftex,
  pdftitle={LyX's Figure, Table, Floats, Notes, and Boxes manual},
  pdfsubject={LyX-documentation about figures, tables, floats, notes, and boxes},
  pdfkeywords={LyX, Tables, Figures, Floats, Boxes, Notes}]{hyperref}

%mehr Platz zwischen Überschrift und Tabelle
\newcommand{\@ldtable}{}
\let\@ldtable\table
\renewcommand{\table}{ %
                 \setlength{\@tempdima}{\abovecaptionskip} %
                 \setlength{\abovecaptionskip}{\belowcaptionskip} %
                 \setlength{\belowcaptionskip}{\@tempdima} %
                 \@ldtable}

%In dieser Arbeit wird auf die Nomenklatur als Abkürzungsverzeichnis verzichtet. Bei Wunsch wieder aktivieren.
%Nomenklatur als Abkürzungsverzeichnis verwenden
%\renewcommand{\nomname}{Abkürzungsverzeichnis}
%\renewcommand{\nomlabelwidth}{20mm}

%Nomenklatur als Glossar verwenden
%Nur Noetig wenn auch Glossar verwendet wird.
\renewcommand{\nomname}{Glossar}

%Farbe für Programmcode festlegen
\definecolor{lightgray}{rgb}{0.8,0.8,0.8}

\AtBeginDocument{
  \def\labelitemiii{\(\circ\)}
}

\makeatother

\usepackage{listings}
\renewcommand{\lstlistingname}{Listing}

\begin{document}
\noindent \titlepage

\noindent \begin{center}
\begin{tabular}{cc}
 & \multirow{0}{*}{\includegraphics[width=5cm]{images/hn_niederrhein_logo_big}}\tabularnewline
{\large{}Fachbereich Elektrotechnik und Informatik}\hspace{1.5cm} & \tabularnewline
 & \tabularnewline
 & \tabularnewline
 & \tabularnewline
\end{tabular}
\par\end{center}

\noindent \vspace{7cm}


\noindent \begin{flushleft}
\textbf{\Large{}Projektfach WS 16/17}
\par\end{flushleft}{\Large \par}

\noindent \begin{flushleft}
{\large{}SLAM - Simultaneous Localization and Mapping}
\par\end{flushleft}{\large \par}

\noindent \begin{flushleft}
{\Large{}\vspace{1.5cm}
}
\par\end{flushleft}{\Large \par}

\begin{tabular}{ll}
eingereicht von:\hspace{1cm} & Andre Kürten\tabularnewline
 & Matrikelnummer: 838311\tabularnewline
 & Sebastian Schilling\tabularnewline
 & Matrikelnummer: 971726\tabularnewline
 & \tabularnewline
betreut durch: & Prof. Dr.-Ing. Thomas Nitsche\tabularnewline
 & Hochschule Niederrhein\tabularnewline
 & \tabularnewline
 & \tabularnewline
 & \tabularnewline
\multicolumn{2}{l}{Krefeld, der \today}\tabularnewline
\end{tabular}

\newpage{}

~

\vspace{17.1mm}


\noindent \begin{flushleft}
\textbf{\huge{}Kurzfassung}
\par\end{flushleft}{\huge \par}

Dieser Bericht fasst die Arbeiten und Ergebnisse des Wahlprojektfaches
des Masterstudiengangs Informatik der Hochschule Niederrhein zusammen.
Ziel des Projektes ist die Erstellung einer Umgebungskarte eines Roboters in einer für ihn unbekannten Gegend. Mithilfe dieser generierten Karte, soll es dem Roboter möglich sein zu navigieren. Die oben genannten Anforderung lassen sich durch das SLAM-Problem beschreiben. Für das Projekt wurden verschiedenen Algorithmen ausprobiert und miteinander verglichen.


\newpage{}

\tableofcontents{}

\newpage{}



\pagenumbering{roman}
\setcounter{page}{4}

\listoffigures


\newpage{}

\listoftables


\newpage{}

\pagenumbering{arabic}

%============================================ Einführung ============================================
\chapter{Einführung}
 
\section{Was ist SLAM?}

In der Robotik steht das Akronym SLAM für Simultanesous Localization
and Mapping. Dabei beschreibt SLAM das Problem eines Roboters, eine Karte von seiner unbekannten Umgebung zu erstellen und gleichzeitig mit dieser anhand von Sensordaten zu navigieren (auch SLAM-Problem genannt).
Um das Problem zu lösen werden in der Regel probabilistische und nicht deterministische Ansätze verfolgt. Zur Lösung eines SLAM-Problems müssen u.a. folgende Unterprobleme gelöst werden:
\begin{itemize}
	\item Positionsgewinnung der Landmarks
	\item Zuordnung von Sensordaten zu den Landmarks
	\item Entscheidung ob Sensordaten einen bereits verfassten Landmarks gehören.
	\item Minimierung des entstandenen Fehlers
\end{itemize}
Konkrete Ansätze zur Lösung des Problems werden Bayes Filter und Partikel Filter als probabilistische Modelle verwendet.

\section{Bayes Filter}
Im Allgemeinen ist ein Bayes - Filter ein probabilistischer Ansatz um eine unbekannte Wahrscheinlichkeitsdichtefunktion rekusiv über die Zeit hinweg zu bestimmen.  
In der Informatik und der Robotik ist ein Bayes - Filter ein Verfahren verschiedene, Wahrscheinlichkeiten für die Position und Orientierung eines Roboters zu berechnen, befolgt von einer Aktualisierung der wahrscheinlichsten Position innerhalb einer Karte. Im SLAM-Kontext wird zwischen Kalman- und Partikel - Filter unterschieden. 

\subsection{Kalman Filter}
Vereinfacht kann man sagen dass das Kalman - Filter die Störungen welche durch die Messgeräte verursacht werden entfernt. Das Filter bestimmt den aktuellen Systemzustand, rekursiv anhand der vorhergehenden gestörten Messungen. Für lineare Systeme kann man sich auf das Kalman - Filter beschränken. In der Realität sind die Systeme meist jedoch nichtlinear.Um dieses Problem dennoch in den Griff zu bekommen benutzt man den \textit{Extended - Kalman - Filter} (EKF) welcher auch für nichtlineare Systeme funktioniert.
Das Filter besteht generell aus zwei Schritten:
\begin{enumerate}
	\item Vorhersagen
	\item Korrigieren
\end{enumerate}
Beim Vorhersagen wird eine Annahme über den Systemzustand zum nächsten Zeitpunkt, anhand des bekannten Verhaltens des Systems getroffen. Bei der Korrektur wird der tatsächliche Systemzustand anhand der Messvorrichtung bestimmt, und anschließend den Zustand anhand der Abweichung der beiden Zustände korrigiert.
Die nachstehende Abbildung zeigt exemplarisch den Kalman - Filter Algorithmus.
\begin{figure}[h]
	\includegraphics[scale=0.4]{images/kalman.png}
	\caption{Kalman - Filter - Algorithmus}
\end{figure}
Durch den rekusiven ansatz ist der Kalman - Filter auch für Echtzeitsysteme geeignet.

\subsection{Partikel Filter}
Der Partikel Filter wird auch Sequenzielle Monte-Carlo-Methode (SMC-Methode) genannt. Ziel ist es, die gerade aktuelle, aber unbekannte Wahrscheinlichkeitsdichte auf den Zustandsraum zu schätzen. Daraus kann dann der wahrscheinlichste Systemzustand abgeleitet werden.\\
Häufig ist es der Fall, dass der Ort von Objekten zu Beginn nicht bekannt ist und diese erst durch Messungen ermittelt werden müssen. Die Messungen werden aber immer eine gewisse Fehlerrate vorweisen. Dh. die Messungen geben den wahren Zustand nicht korrekt wieder. Es ist aber möglich, anhand der Messungen den Zustand zu schätzen.\\
Während der Kalman Filter von einer normalverteilten Störgröße ausgeht, geht der Partikel Filter von einer nichtlinearen Störgröße aus. Hier können mehrere Maxima auftreten und den Systemzustand wider spiegeln. \par
Beim Partikel Filter wird eine Wolke von sogenannten Partikeln produziert, die im Anfangszustand gleichverteilt auf der Karte auftreten. Jeder Partikel beschreibt einen Zustand, der aus einem Gewicht und einem Punkt auf der Karte besteht. Der Partikel Filter besteht aus vier Schritten:

\begin{enumerate}
	\item Fortschreiten (Bewegung)
	\item Addieren eines Fehlers auf die Zustände
	\item Messen und gewichten der Partikel
	\item Resampeln
\end{enumerate}

Der erste Schritt ist das Fortschreiten des Partikels. Diese Schätzung wird für jeden Partikel ausgeführt. Im zweiten Schritt wird ein künstlich ausgewählter Fehler auf jede Bewegung aus Schritt eins hinzugefügt. Dies ist notwendig um das Systemrauschen, das bei den realen Messwerten auftritt, nachzubilden. Im dritten Schritt wird überprüft, wie realistisch die einzelnen Partikel zu den realen Werten passen. Passen sie sehr gut, so erhalten sie ein hohes Gewicht. Ansonsten wird ihnen ein niedriges Gewicht zugewiesen. Im letzten Schritt, dem Resampling, findet eine Selektierung der Partikel statt. Partikel mit hohen Gewichten werden behalten und Partikel mit niedrigen Gewichten werden verworfen. \par

Der Partikel Filter kann auch dazu verwendet werden, die Position eines Roboters mit gegebener Karte zu ermitteln. Dazu werden auf der gestellten Karte die Partikel im Anfangszustand gleichverteilt verteilt. Danach wird überprüft, ob die Messungen des Roboters mit der Karte übereinstimmen. Ist die der Fall, so werden diese Partikel hoch gewichtet. Im nächsten Schritt werden von den hohen gewichteten Partikel mehr Partikel gestreut. Die weniger gewichteten Partikel werden verworfen oder von dort aus weniger Partikel gestreut.\\
Nach wenigen Schritten kann eine relative gute Positionsbestimmung trotz verrauschten Messwerten erfolgen.

%============================================ Datenformate ============================================
\chapter{Datenformate}
Es gibt verschiedene Möglichkeiten einen Roboter mittels Sensoren zu versehen. Unter anderem gibt es 2D-Laser, 3D-Laser oder auch stereo Kameras. Wir haben uns im Rahmen des Projektes nur mit 2D-Laser Daten auseinander gesetzt und stellen hier die gängigsten Datenformate vor. Für die Algorithmen haben wir ein eigenes Datenformat, abgeleitet von den bestehenden, benutzt. 

\section{Eigenes Datenformat}
Während unseren Experimenten haben wir festgestellt, dass viele Beispieldaten eine eigne Logik der Daten besitzen. Deshalb haben wir uns auf ein eigenes Datenformat geeinigt. Jede Zeile stellt einen Scandurchlauf dar. Die ersten drei Werte beschreiben die Odometrie: x-Wert, y-Wert und den Winkel Theta. Die vierte Zahl gibt die Anzahl der darauf folgenden Messwerte wieder. Eine Kommentarzeile wird durch eine \# eingeleitet. Abbildung \ref{eigenesDatenformat} zeigt einen Auszug einer Zeile aus einer Beispieldatei.

\begin{figure}[h]
	\begin{lstlisting}[backgroundcolor={\color{lightgray}},basicstyle={\normalsize\sffamily},breaklines=true,frame={leftline,bottomline,rightline,topline},language=C,numbers=left,showstringspaces=false,xleftmargin=15pt]
	#(Odemetry) x y theta (Laser) #num [values]
	-2.424026 4.800517 2.590948 181 0.642000 0.645000 0.645000 0.644000 0.644000 0.643000 0.642000 0.649000 0.648000 0.646000 0.645000 0.652000 0.651000 0.660000 0.659000 0.659000 0.667000 0.668000 0.667000 0.674000 0.675000 0.675000 0.683000 0.691000 0.692000 0.702000 0.702000 0.710000 0.710000 0.718000 0.726000 0.735000 0.743000 0.743000 0.760000 0.760000 0.771000 0.780000 0.797000 0.797000 0.815000 0.824000 0.833000 0.841000 0.858000 0.872000 0.880000 0.910000 0.917000 0.933000 0.950000 0.967000 0.992000 1.018000 1.024000 1.052000 1.077000 1.104000 1.130000 1.156000 1.191000 1.226000 1.252000 1.284000 1.336000 1.380000 1.421000 1.467000 1.476000 1.469000 1.455000 1.447000 1.437000 1.430000 1.442000 1.513000 1.600000 1.681000 1.796000 1.922000 2.068000 3.150000 3.134000 3.385000 3.757000 4.210000 4.799000 5.584000 6.775000 7.435000 8.183001 8.183001 8.183001 8.183001 8.183001 8.183001 8.183001 8.183000 8.183000 8.183001 8.183001 6.860000 6.397001 6.403001 6.420000 6.112000 6.090000 5.285000 4.937000 4.947000 4.667000 4.243000 3.900000 3.712000 3.544000 3.392000 3.250000 3.129000 3.007000 2.903000 2.808000 2.712000 2.631000 2.549000 2.472000 2.402000 2.335000 2.276000 2.216000 2.163000 2.110000 2.065000 2.019000 1.973000 1.937000 1.903000 1.859000 1.824000 1.798000 1.764000 1.741000 1.714000 1.688000 1.661000 1.634000 1.618000 1.591000 1.574000 1.550000 1.532000 1.515000 1.499000 1.482000 1.465000 1.448000 1.440000 1.423000 1.415000 1.406000 1.389000 1.381000 1.372000 1.363000 1.347000 1.346000 1.339000 1.330000 1.322000 1.314000 1.305000 1.305000 1.298000 1.298000 1.289000 1.282000 1.282000 1.275000 1.276000 1.278000 1.272000 1.264000 
	\end{lstlisting} 
	\protect\caption{Eine Datenzeile im eigenem Datenformat}
	\label{eigenesDatenformat}
\end{figure}

\section{Beispieldaten}
Einige Sensor Beispieldaten können von folgender Webseite heruntergeladen werden:  \url{http://www.mrpt.org/robotics_datasets}
%============================================ Algorithmen ============================================
\chapter{Algorithmen}
Da es so schien als gäbe es eine große Auswahl bereits fertig implementiert und getestete  Algorithmen und Frameworks haben wir uns nach Absprache mit dem Betreuer dafür entschieden uns auf diese fertige Software zu beschränken. Ebenfalls haben wir uns auf Entfernungsdaten aus einem Laserscanner beschränkt, und etwaige Bildverarbeitung außen vor gelassen. Anschließen ist die Software aufgelistet bei denen wir die meisten Erfolge verbuchen konnten.

\section{DPSlam}

\section{tinySLAM}
tinySLAM ist ein Open-Source Projekt der Wissenschaftler Bruno Steux und Oussama El Hamzaoui von der Mines ParisTech Universität. Entwicklet in weniger als 200 Zeilen C-Code und nur Laserdaten als Input. Diese Charakteristika erschien uns als Ideal da C gut auf andere Platformen zu portieren, hardwarenah und schnell ist, und die Anforderung sich auf Laserdaten zu beschränken ebenfalls erfüllt war. Beziehen kann man die Software unter https://openslam.org/tinyslam.html .
Nach der Kompilierung der Software versuchten wir als erstes das mitgelieferte Testprogramm mit den dazugehörigen Testdaten. Das Testprogramm lieferte erste vielversprechende Ergebnisse. Neben einer Animation (Abb. 3.1) zur Laufzeit, stellt es nach Abschluss auch fertige Karten des Raumes (Abb.3.2 / 3.3) zur Verfügung.
In der \ref{tinyLive} kann man grafisch erkennen wie der Algorithmus arbeitet. Von seinem Startpunkt aus fährt er einmal im Kreis und erfasst alles soweit wie er kann. Im nächsten Durchlauf wird der Bereich untersucht wo potenziell keine Hindernisse erfasst wurden, und fährt erneut im Kreis.
Als nächsten Schritt wollten wir das Testprogramm mit einem von uns ausgesuchten Datensatz testen. Um das zu bewerkstelligen schauten wir uns zuerst die verwendeten Daten einmal an. Dabei stellten wir fest das wir bis auf den ersten Wert einer jeden Zeile gar keinen Wert, den zuvor ausgemachten Werten (Odometrie, Winkel,Entfernungsdaten etc.) zuordnen konnten. Zudem ist die Anzahl der Werte pro Zeile auch stark erhöht und unterliegen teilweise sehr großen Schwankungen von \(2.4 \times 10^{-3}\) bis \(1.2 \times 10^{4}\). Ohne zusätzlich Informationen zu den verwendeten Testdaten war es uns nicht möglich diese zu deuten. Nichts desto trotz haben wir einfach einmal geschaut was denn passiert wenn wir die Software mit anderen Datensätze füttern. 
\begin{figure}[h]
	\includegraphics[scale=0.34]{images/tiny_live1.png}
	\includegraphics[scale=0.34]{images/tiny_live2.png}
	\includegraphics[scale=0.34]{images/tiny_live3.png}
	\caption{Bildausschnitte während der Roboteranimation zur Laufzeit}
	\label{tinyLive}
\end{figure}

\begin{figure}[h]
	\includegraphics[scale=0.15]{images/exp1_loop0_final.png}
	\caption{Erste Karte nach erstem Durchlauf des Roboters}
\end{figure}
\begin{figure}[h]
	\includegraphics[scale=0.15]{images/exp1_loop1_final.png}
		\caption{Komplette Karte nach zweitem Durchlauf des Roboters}
\end{figure}

\section{MRPT}

\section{Sonstige}




%============================================ Ausblick ============================================
\chapter{Ausblick}






% Dieser Code ist noetig, da sonst die falsche Seitenzahl im Inhaltsverzeichnis angezeigt wird
\clearpage
\phantomsection
% Die folgende Zeile sorgt dafuer, dass der Glossar im Inhaltsverzeichnis angezeigt wird.
\addcontentsline{toc}{chapter}{Glossar}

\nomenclature{APT}{Advanced Packaging Tool (kurz. APT) ist ein Paketverwaltungssystem das z.B. bei Debian und Ubuntu eingesetzt wird. Das Paketverwaltungssystem stellt einen Großteil der für das Betriebssystem verfügbaren Programme und Erweiterungen bereit. Diese können durch den Benutzer meist in der Befehlszeile oder über eine grafische Oberfläche installiert und konfiguriert werden. }\nomenclature{API}{Application Programming Interface (kurz API) ist eine Programmierschnittstelle die eine Anbindung von Außen an ein bestehendes System bietet. Die Schnittstelle wird vom Hersteller der Software zur Verfügung gestellt um Dritten die Möglichkeit eines Addons oder einer Erweiterung zu geben. Die Schnittstelle definiert dabei ein Standardformat und Standardbefehle.}

\settowidth{\nomlabelwidth}{APT}
\printnomenclature{}

% Dieser Code ist noetig, da sonst die falsche Seitenzahl im Inhaltsverzeichnis angezeigt wird
\clearpage
\phantomsection



\bibliographystyle{bibtex-daten/unsrtdin}
\addcontentsline{toc}{chapter}{\bibname}\nocite{*}
\bibliography{bibtex-daten/bachelorarbeit-info}

\end{document}
